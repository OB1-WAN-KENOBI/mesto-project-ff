(()=>{"use strict";function e(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",n),e.addEventListener("mousedown",o);const r=e.querySelector(".popup__close");r&&r.addEventListener("click",(()=>t(e)))}function t(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",n),e.removeEventListener("mousedown",o)}function n(e){if("Escape"===e.key){const e=document.querySelector(".popup_is-opened");e&&t(e)}}function o(e){e.target.classList.contains("popup_is-opened")&&t(e.target)}function r({name:e,link:t},{onDelete:n,onLike:o,onImageClick:r}){const c=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),s=c.querySelector(".card__image"),d=c.querySelector(".card__title"),l=c.querySelector(".card__like-button"),a=c.querySelector(".card__delete-button");return d.textContent=e,s.src=t,s.alt=e,a.addEventListener("click",(()=>n(c))),l.addEventListener("click",(()=>o(l))),s.addEventListener("click",(()=>r({name:e,link:t}))),c}const c=document.querySelector(".profile__edit-button"),s=document.querySelector(".popup_type_edit"),d=s.querySelector('form[name="edit-profile"]'),l=d.elements.name,a=d.elements.description,i=document.querySelector(".profile__title"),p=document.querySelector(".profile__description"),u=document.querySelector(".profile__add-button"),m=document.querySelector(".popup_type_new-card"),_=m.querySelector('form[name="new-place"]'),y=document.querySelector(".popup_type_image"),k=y.querySelector(".popup__image"),v=y.querySelector(".popup__caption"),f=document.querySelector(".places__list");function q(e){e.remove()}function S(e){e.classList.toggle("card__like-button_is-active")}function L({name:t,link:n}){k.src=n,k.alt=t,v.textContent=t,e(y)}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((e=>{const t=r(e,{onDelete:q,onLike:S,onImageClick:L});f.append(t)})),c.addEventListener("click",(()=>{l.value=i.textContent,a.value=p.textContent,e(s)})),d.addEventListener("submit",(e=>{e.preventDefault(),i.textContent=l.value,p.textContent=a.value,t(s)})),u.addEventListener("click",(()=>e(m))),_.addEventListener("submit",(e=>{e.preventDefault();const n=r({name:_.elements["place-name"].value,link:_.elements.link.value},{onDelete:q,onLike:S,onImageClick:L});f.prepend(n),_.reset(),t(m)}))})();